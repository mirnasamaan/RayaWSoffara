<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>راية وصفارة - @ViewBag.Title</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,700,700italic,800,800italic,600italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/earlyaccess/droidarabickufi.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/Site.css">
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/Color.css">
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/bootstrap-arabic.css">
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/jquery.tagit.css">
    @*<link rel="stylesheet" type="text/css" href="~/Content/CSS/tagit.ui-zendesk.css">*@
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    @*<link rel="stylesheet" type="text/css" href="~/Content/CSS/bootstrap-ar.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/bootstrap-theme-ar.css">
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/bootstrap-theme-ar.min.css">*@

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    @*<script src="~/Content/Scripts/jquery-1.4.2.min.js"></script>*@
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/tinycarousel.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/jquery.bxslider.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/jquery.Jcrop.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/jquery.Jcrop.min.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/CSS/multi-select.css" />

    @*@Styles.Render("~/Content/css")*@
    @* @Scripts.Render("~/bundles/modernizr")*@
</head>
<body>
    <div id="fb-root"></div>
    <header>
        <div class="content-wrapper duplicate ">
            <div class="row header_divs duplicate header_div_1">
                <div>
                    <div class="container-fluid container-sm">
                        <div class="logo_div">
                            <a href="/">
                                <h1>راية وصفارة</h1>
                                <div class="slogan">أول موقع تواصل اجتماعي لكرة القدم</div>
                            </a>
                        </div>
                        <div class="navigation">
                            <div class="pull-left">
                                <nav class="navbar navbar-default no-margin">
                                    <div class="container-fluid">
                                        <div class="navbar-header">
                                            <button type="button" class="navbar-toggle collapsed pull-left" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                                <span class="sr-only">Toggle navigation</span>
                                                <span class="icon-bar"></span>
                                                <span class="icon-bar"></span>
                                                <span class="icon-bar"></span>
                                            </button>
                                        </div>
                                    </div>
                                </nav>
                            </div>
                        </div>
                        <div class="pull-right">
                            <ul class="nav-right">
                                @if (Request.IsAuthenticated)
                                {
                                    <li>
                                        <a href="/Article" class="pull-left article_anchor"><span>إكــــتــب</span><i class="fa fa-pencil-square-o pull-right article-write"></i>
                                        </a>
                                    </li>
                                }
                                <li class="pull-right">
                                    @Html.Partial("_LoginPartial")
                                </li>
                            </ul>
                        </div>
                        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                            <ul class="nav navbar-nav">
                                <li id="home-dup" class=""><a href="/"><i class="fa fa-home pull-left"></i><span class="pull-left">الرئيسية </span>
                                    <div class="clearfix"></div>
                                </a></li>
                                <li id="popular-dup" class=""><a href="/Popular/"><i class="fa fa-area-chart pull-left"></i><span class="pull-left">الأشهر </span>
                                    <div class="clearfix"></div>
                                </a></li>
@*                                <li id="leaderboard-dup"><a href="/Leaderboard/"><i class="fa fa-area-chart pull-left"></i><span class="pull-left">أشهر الكتاب </span>
                                    <div class="clearfix"></div>
                                </a></li>*@
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sub-headers">
                <div class="row header_divs duplicate header_div_3">
                    <div class="container">
                        <div class="tags-container">
                            <div>
                                <ul class="keywords myTags"></ul>
                                <div class="button-container">
                                    <div class="search-btn">
                                        <button class="search"><i class="fa fa-search"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="button-container">
                            <div class="search-btn">
                                <button class="toggle-btn">
                                    <i class="fa fa-area-chart"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row header_divs duplicate header_div_2">
                    <div class="container">
                        <div class="popular-container hidden-xs">
                            <label>أكثر الكلمات بحثا</label>
                        </div>
                        <div class="keywords-wrapper">
                            <div class="keywards-ineer">
                                <div class="keywords-inner-wrapper">
                                    <div class="keywords"></div>
                                </div>
                                <button class="left"><i class="fa fa-chevron-right"></i></button>
                                <button class="right"><i class="fa fa-chevron-left"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-wrapper original">
            <div class="row header_divs header_div_1">
                <div>
                    <div class="container-fluid container-sm">
                        <div class="logo_div">
                            <a href="/">
                                <h1>راية وصفارة</h1>
                                <div class="slogan">أول موقع تواصل اجتماعي لكرة القدم</div>
                            </a>
                        </div>
                        <div class="navigation">
                            <div class="pull-left">
                                <nav class="navbar navbar-default no-margin">
                                    <div class="container-fluid">
                                        <div class="navbar-header">
                                            <button type="button" class="navbar-toggle collapsed pull-left" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                                <span class="sr-only">Toggle navigation</span>
                                                <span class="icon-bar"></span>
                                                <span class="icon-bar"></span>
                                                <span class="icon-bar"></span>
                                            </button>
                                        </div>
                                    </div>
                                </nav>
                            </div>
                        </div>
                        <div class="pull-right">
                            <ul class="nav-right">
                                @if (Request.IsAuthenticated)
                                {
                                    <li>
                                        <a href="/Article" class="pull-left article_anchor"><span>إكــــتــب</span><i class="fa fa-pencil-square-o pull-right article-write"></i>
                                        </a>
                                    </li>
                                }
                                <li class="pull-right">
                                    @Html.Partial("_LoginPartial")
                                </li>
                            </ul>
                        </div>
                        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                            <ul class="nav navbar-nav">
                                <li id="home"><a href="/"><i class="fa fa-home pull-left"></i><span class="pull-left">الرئيسية </span>
                                    <div class="clearfix"></div>
                                </a></li>
                                <li id="popular"><a href="/Popular/"><i class="fa fa-area-chart pull-left"></i><span class="pull-left">الأشهر </span>
                                    <div class="clearfix"></div>
                                </a></li>
                                @*<li id="leaderboard"><a href="/Leaderboard/"><i class="fa fa-area-chart pull-left"></i><span class="pull-left">أشهر الكتاب </span>
                                    <div class="clearfix"></div>
                                </a></li>*@
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sub-headers">
                <div class="row header_divs header_div_3">
                    <div class="container">
                        <div class="tags-container">
                            <div>
                                <ul class="keywords myTags"></ul>
                                <div class="button-container">
                                    <div class="search-btn">
                                        <button class="search"><i class="fa fa-search"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="button-container">
                            <div class="search-btn">
                                <button class="toggle-btn">
                                    <i class="fa fa-area-chart"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row header_divs original header_div_2">
                    <div class="container">
                        <div class="popular-container hidden-xs">
                            <label>أكثر الكلمات بحثا</label>
                        </div>
                        <div class="keywords-wrapper">
                            <div class="keywards-ineer">
                                <div class="keywords-inner-wrapper">
                                    <div class="keywords"></div>
                                </div>
                                <button class="left"><i class="fa fa-chevron-right"></i></button>
                                <button class="right"><i class="fa fa-chevron-left"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </header>
    <div class="boundries">
        @RenderBody()

    <div class="loading-crop hidden">
        <div>
            <div class="sk-fading-circle">
                <div class="sk-circle1 sk-circle"></div>
                <div class="sk-circle2 sk-circle"></div>
                <div class="sk-circle3 sk-circle"></div>
                <div class="sk-circle4 sk-circle"></div>
                <div class="sk-circle5 sk-circle"></div>
                <div class="sk-circle6 sk-circle"></div>
                <div class="sk-circle7 sk-circle"></div>
                <div class="sk-circle8 sk-circle"></div>
                <div class="sk-circle9 sk-circle"></div>
                <div class="sk-circle10 sk-circle"></div>
                <div class="sk-circle11 sk-circle"></div>
                <div class="sk-circle12 sk-circle"></div>
            </div>
        </div>
    </div>
    </div>
    <div class="content-wrapper" id="yellow_line"></div>
    <footer>
        <div class="content-wrapper" id="footer_container">
            <div class="container_margin">
                <div class="row">
                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                        <div class="footer_title">
                            من نحن
                        </div>
                        <div class="footer_cols">
                            ذكرت صحيفة "أ س" الأسبانية في تحليل لها لأداء فريق ريال مدريد منذ بداية عام 2015 أن النادي الملكي يمر بأسوأ مراحله التاريخية بعد أن اختتم...
                            5 أشياء يجب أن يعرفها صلاح قبل ظهوره الأول مع فيورنتينا
                            من المنتظر أن يظهر محمد صلاح لأول مرة في قميص نادي فيورنتينا في لقاء اليوم أمام أتلانتا، وهذه مناسبة جيدة لتذكير النجم المصري ببعض الحقائق عن...
                            هل تمت إقالة أنشيلوتي مع وقف التنفيذ؟
                            لم تكن ليلة أمس مشكلة كبيرة لريال مدريد لأنه خسر بنتيجة كبيرة صفر-4 أمام أتلتيكو مدريد، فهذا أمر يحدث في كرة القدم، لكن المشكلة أن الفريق...
                            فيديو - مشجع يستوقف لاعب النصر بسبب لون سيارته
                            أوقف مشجع لفريق الهلال نجم نادي النصر والمنتخب السعودي لكرة القدم يحيي الشهري بجانب احد المحلات التجارية بوسط العاصمة السعودية الرياض وقام بإلتقاط مقطع فيديو للاعب...
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                        <div class="footer_title">
                            تواصل معنا
                        </div>
                        <div class="footer_cols">
                            <form>
                                <input type="text" class="footer_inputs" name="footer_email" placeholder="البريد الالكتروني" />
                                <textarea name="message" class="footer_inputs" rows="4" placeholder="رسالتك"></textarea>
                                <input type="submit" name="submit" value="إرسل" id="footer_btn" />
                            </form>
                        </div>
                        <div class="row">
                            <div class="" id="footer_social_div">
                                <img src="~/Content/Images/icon_youtube.png" />
                                <img src="~/Content/Images/icon_gmail.png" />
                                <img src="~/Content/Images/icon_twitter.png" />
                                <img src="~/Content/Images/icon_fb.png" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="~/Content/Scripts/tag-it.js" type="text/javascript" charset="utf-8"></script>

    <script src="~/Content/Scripts/bootstrap-ar.js"></script>
    <script type="text/javascript" src="~/Content/Scripts/jquery.tinycarousel.js"></script>
    <script type="text/javascript" src="~/Content/Scripts/jquery.tinycarousel.min.js"></script>
    <script type="text/javascript" src="~/Content/Scripts/jquery.bxslider.js"></script>
    <script type="text/javascript" src="~/Content/Scripts/jquery.bxslider.min.js"></script>
    <script type="text/javascript" src="~/Content/Scripts/jquery.color.js"></script>
    <script type="text/javascript" src="~/Content/Scripts/jquery.Jcrop.js"></script>
    <script type="text/javascript" src="~/Content/Scripts/jquery.Jcrop.min.js"></script>
    <script type="text/javascript" src="~/Content/Scripts/jquery.multi-select.js"></script>
    <script src="~/Content/Scripts/script.js"></script>
    <script type="text/javascript">

        //$(document).tooltip();

        // START OF DETECTING SCROLL VALUE TO DISPLAY HEADERS //
        $(window).scroll(function (event) {
            var scroll_value = $(window).scrollTop();
            if (parseInt(scroll_value) >= 125) {
                //$(".content-wrapper.duplicate").removeClass("hidden");
                $(".content-wrapper.duplicate").css("top", "60px").css("position", "fixed");
                $(".content-wrapper.duplicate").css("z-index", "99");
            } else if (parseInt(scroll_value) < 125) {
                $(".content-wrapper.duplicate").css("top", "-125px").css("position", "fixed");
                $(".content-wrapper.duplicate").css("z-index", "-1");
                //$(".content-wrapper.duplicate").addClass("hidden");
            }
        });
        // END OF DETECTING SCROLL VALUE TO DISPLAY HEADERS //

        function triggerToggleButton(e) {
            $(e).parent().children("button").click();
        }

        // START OF ADD AND REMOVE TAGS FUNCTIONS //
        function toggleTag(e) {
            var id = $(e).attr("data-id");
            var availableTags = [];
            var availableTagsID = [];
            $('.header_div_2 .keywords div').children('p').each(function () {
                availableTags.push($(this).text());
                availableTagsID.push($(this).parent().children("button").attr("data-id"));
            });

            var original_height;

            $('.myTags').tagit({
                tagSource: availableTags,
                select: true,
                sortable: true,
                allowNewTags: false,
                triggerKeys: ['enter', 'tab'],
                allowSpaces: true,
                beforeTagAdded: function (event, ui) {
                    original_height = $(".header_div_3").height();
                    if ($.inArray(ui.tagLabel, availableTags) == -1) {
                        return false;
                    }
                },
                afterTagAdded: function (event, ui) {
                    var e = $(".header_div_2 .keywords div p[value='" + ui.tagLabel + "']").parent();
                    $(".content-wrapper.original .myTags").tagit("createTag", ui.tagLabel);
                    $(".content-wrapper.duplicate .myTags").tagit("createTag", ui.tagLabel);
                    var button_element = $('button[data-id=' + $(e).children("button").attr("data-id") + ']');
                    $(button_element).css("background-color", "#ab2019");
                    $(button_element).attr("data-function", "remove");
                    $(button_element).children("i").removeClass("fa-plus");
                    $(button_element).children("i").addClass("fa-close");
                },
                beforeTagRemoved: function (event, ui) {
                    original_height = $(".header_div_3").height();
                    var data_id = $(ui.tag).attr("data-id");
                    var button_element = $('button[data-id=' + data_id + ']');
                    $(button_element).attr("data-function", "add").css("background-color", "#3bc264");
                    $(button_element).children("i").removeClass("fa-close");
                    $(button_element).children("i").addClass("fa-plus");
                },
                afterTagRemoved: function (event, ui) {
                    var data_id = $(ui.tag).attr("data-id");
                    $(".myTags").tagit("removeTag", $(".myTags li[data-id=" + data_id + "]"));
                    var button_element = $('button[data-id=' + data_id + ']');
                    $(button_element).attr("data-function", "add").css("background-color", "#3bc264");
                    $(button_element).children("i").removeClass("fa-close");
                    $(button_element).children("i").addClass("fa-plus");
                }
            });

            if ($(e).attr("data-function") == "add") {
                $(".myTags").tagit("createTag", e.id);
                $(".content-wrapper.original .myTags li").eq(-2).attr("data-id", id);
                $(".content-wrapper.duplicate .myTags li").eq(-2).attr("data-id", id);
            }
            else if ($(e).attr("data-function") == "remove") {
                $(".myTags").tagit("removeTag", $(".myTags li[data-id=" + $(e).attr("data-id") + "]"));
            }
        }
        // END OF ADD AND REMOVE TAGS FUNCTIONS //

        $(function () {
            // START OF TAG-IT FUNCTIONS //
            var availableTags = [];
            var availableTagsID = [];

            $('.myTags').tagit({
                tagSource: function (search, showChoices) {
                    if (search.term.length > 2) {
                        $.ajax({
                            async: false,
                            type: "POST",
                            data: { Term: search.term },
                            url: "/Home/GetTags",
                            success: function (Tags) {
                                availableTags = [];
                                availableTagsID = [];
                                $('.header_div_2 .keywords').children('p').each(function () {
                                    availableTags.push();
                                });
                                for (i = 0; i < Tags.length; i++) {
                                    availableTags.push(Tags[i].TagName);
                                    availableTagsID.push(Tags[i].TagID);
                                }
                                showChoices(availableTags);
                            }
                        })
                    }
                },
                select: true,
                sortable: true,
                allowNewTags: false,
                triggerKeys: ['enter', 'tab'],
                beforeTagAdded: function (event, ui) {
                    if ($.inArray(ui.tagLabel, availableTags) == -1) {
                        return false;
                    }
                },
                afterTagAdded: function (event, ui) {
                    //alert("test");
                    var e = $(".header_div_2 .keywords div p[value='" + ui.tagLabel + "']").parent();
                    $(".content-wrapper.original .myTags").tagit("createTag", ui.tagLabel);
                    $(".content-wrapper.duplicate .myTags").tagit("createTag", ui.tagLabel);
                    $(".myTags li").eq(-2).attr("data-id", $(e).children("button").attr("data-id"));
                    $(".content-wrapper.original .myTags li").eq(-2).attr("data-id", $(e).children("button").attr("data-id"));
                    $(".content-wrapper.duplicate .myTags li").eq(-2).attr("data-id", $(e).children("button").attr("data-id"));
                    var button_element = $('button[data-id=' + $(e).children("button").attr("data-id") + ']');
                    $(button_element).css("background-color", "#ab2019");
                    $(button_element).attr("data-function", "remove");
                    $(button_element).children("i").removeClass("fa-plus");
                    $(button_element).children("i").addClass("fa-close");
                },
                beforeTagRemoved: function (event, ui) {
                    var data_id = $(ui.tag).attr("data-id");
                    var button_element = $('button[data-id=' + data_id + ']');
                    $(button_element).attr("data-function", "add").css("background-color", "#3bc264");
                    $(button_element).children("i").removeClass("fa-close");
                    $(button_element).children("i").addClass("fa-plus");
                },
                afterTagRemoved: function (event, ui) {
                    var data_id = $(ui.tag).attr("data-id");
                    $(".myTags").tagit("removeTag", $(".myTags li[data-id=" + data_id + "]"));
                }
            });

            $(".header_div_3 .tagit-new input").attr("placeholder", "+ أضف كلمة بحثية");
            // END OF TAG-IT FUNCTIONS //

            // START OF GETTING FEATURED TAGS //
            $.ajax({
                async: false,
                type: "GET",
                url: "/Home/GetFeaturedTags",
                success: function (Tags) {
                    for (i = 0; i < Tags.length; i++) {
                        html = '<div><p class="pull-left" onclick="triggerToggleButton(this)" value="' + Tags[i].TagName + '">' + Tags[i].TagName + '</p>';
                        html += '<button class="pull-right" data-function="add" onclick="toggleTag(this)" id="' + Tags[i].TagName + '" data-id="' + Tags[i].TagID + '"><i class="fa fa-plus"></i></button>';
                        html += '</div>';

                        $(".header_div_2 .keywords").append(html);
                    }
                }
            });
            // END OF GETTING FEATURED TAGS //

            // START OF FEATURED TAGS HEADER TOGGLE BUTTON //
            $(".content-wrapper.original .toggle-btn").click(function () {
                $(".header_div_2.original").slideToggle(300);
            });
            $(".content-wrapper.duplicate .toggle-btn").click(function () {
                $(".header_div_2.duplicate").slideToggle(300);
            });
            // END OF FEATURED TAGS HEADER TOGGLE BUTTON //

            // START OF GETTING POST TYPES FUNCTION //
            $.ajax({
                async: false,
                type: "GET",
                url: "/Home/GetPostTypes",
                success: function (posts) {
                    for (i = 0; i < posts.length; i++) {
                        var color;
                        var icon;
                        switch (parseInt(posts[i].PostTypeID)) {
                            case 1: color = "orange";
                                icon = "<i class='fa fa-newspaper-o' title='مقالة'></i>"; break;
                            case 2: color = "red";
                                icon = "<i class='fa fa-list-ol' title='مقالة توب X'></i>"; break;
                            case 3: color = "green";
                                icon = "<i class='fa fa-exclamation' title='رأي'></i>"; break;
                            case 4: color = "blue";
                                icon = "<i class='fa fa-picture-o' title='صورة'></i>"; break;
                            case 5: color = "brown";
                                icon = "<i class='fa fa-video-camera' title='فيديو'></i>"; break;
                            default: color = "black"; break;
                        }
                        html = '<div class="pull-left checkbox-item-wrapper ' + color + '">';
                        var id = "";
                        if (posts[i].PostTypeID == 2) {
                            var str = decodeURI(posts[i].PostTypeName);
                            id = "توب";
                        } else {
                            id = decodeURI(posts[i].PostTypeName);
                        }
                        html += '<div class="' + color + ' pull-left">' + icon + '</div>';
                        html += '<input class="' + id + '" type="checkbox" name="PostType" value="' + posts[i].PostTypeID + '">';
                        html += '<label>' + decodeURI(posts[i].PostTypeName) + '</label></div>';

                        $(".header_div_4 .checkbox-wrapper.hidden-xs > div").append(html);

                        html = '<div class="pull-left checkbox-item-wrapper col-xs-6 ' + color + '">';
                        var id = "";
                        if (posts[i].PostTypeID == 2) {
                            var str = decodeURI(posts[i].PostTypeName);
                            id = "توب";
                        } else {
                            id = decodeURI(posts[i].PostTypeName);
                        }
                        html += '<div class="' + color + ' pull-left">' + icon + '</div>';
                        html += '<input class="' + id + '" type="checkbox" name="PostType" value="' + posts[i].PostTypeID + '">';
                        html += '<label>' + decodeURI(posts[i].PostTypeName) + '</label></div>';

                        $(".header_div_4 .visible-xs").append(html);
                    }
                }
            });
            // END OF GETTING POST TYPES FUNCTION //

            // START OF CHECKBOX CHECK //
            $(".checkbox-item-wrapper label").click(function () {
                var id = $(this).parent().children("input").attr("class");
                if ($(this).parent().children("input").prop("checked")) {
                    $("." + id).prop("checked", false);
                    $(".الكل").prop("checked", false);
                    if ($(this).parent().children("input").attr("class") == "الكل") {
                        window.location.href = "/?posts=&tags=";
                        return;
                    }
                } else {
                    $("." + id).prop("checked", true);
                }
                
                var posts_qs = "";
                $('.checkbox-wrapper.hidden-xs > div').children().each(function () {
                    if ($(this).children('input').is(":checked")) {
                        posts_qs = posts_qs + $(this).children('input').attr("class") + ",";
                    }
                });
                posts_qs = posts_qs.substring(0, posts_qs.length - 1);
                window.location.href = "/?posts=" + posts_qs + "&tags=" + tags_qs;
            });
            // END OF CHECKBOX CHECK //

            // START OF HEADER 2 RIGHT AND LEFT NAVIGATION //
            $(".header_div_2 .right").click(function () {
                event.preventDefault();
                $('.header_div_2 .keywords').animate({
                    scrollLeft: "-=100px"
                }, "fast");
            });
            $(".header_div_2 .left").click(function () {
                event.preventDefault();
                $('.header_div_2 .keywords').animate({
                    scrollLeft: "+=100px"
                }, "fast");
            });
            // END OF HEADER 2 RIGHT AND LEFT NAVIGATION //

            //START OF GETTING QUERYSTRING VALUES
            var vars = [], hash;
            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
            var posts_qs = (vars["posts"] == null) ? "" : vars["posts"];
            var tags_qs = (vars["tags"] == null) ? "" : vars["tags"];
            if (vars["posts"] != null && vars["posts"] != "") {
                var posts = vars["posts"].split(',');
                for (var i = 0; i < posts.length; i++) {
            $('.' + decodeURI(posts[i])).prop("checked", true);
                    if (decodeURI(posts[i]) == "الكل") {
                        $(".checkbox-item-wrapper input").prop("checked", true);
                    }
                }
            }

            if (vars["tags"] != null) {
                var tags = vars["tags"].split(',');

                var avalableTags = [];
                for (var i = 0; i < tags.length; i++) {
                    availableTags[i] = decodeURI(tags[i]);
                }
                $('.myTags').tagit({
                    tagSource: availableTags,
                    select: true,
                    sortable: true,
                    allowNewTags: false,
                    triggerKeys: ['enter', 'tab'],
                    allowSpaces: true,
                    beforeTagAdded: function (event, ui) {
                        if ($.inArray(ui.tagLabel, availableTags) == -1) {
                            return false;
                        }
                    },
                    afterTagAdded: function (event, ui) {
                        var e = $(".header_div_2 .keywords div p[value='" + ui.tagLabel + "']").parent();
                        $.ajax({
                            type: "POST",
                            url: "/Article/GetTagIdbyName",
                            data: { tagName: ui.tagLabel },
                            success: function (tagId) {
                                $(".myTags li").eq(-2).attr("data-id", tagId);
                            }
                        });
                        //$(".myTags li").eq(-2).attr("data-id", $(e).children("button").attr("data-id"));
                        $(".content-wrapper.original .myTags").tagit("createTag", ui.tagLabel);
                        $(".content-wrapper.duplicate .myTags").tagit("createTag", ui.tagLabel);
                        var button_element = $('button[data-id=' + $(e).children("button").attr("data-id") + ']');
                        $(button_element).css("background-color", "#ab2019");
                        $(button_element).attr("data-function", "remove");
                        $(button_element).children("i").removeClass("fa-plus");
                        $(button_element).children("i").addClass("fa-close");
                    },
                    beforeTagRemoved: function (event, ui) {
                        var data_id = $(ui.tag).attr("data-id");
                        //alert(data_id);
                        var element = $('button[data-id=' + data_id + ']');
                        $(element).attr("data-function", "add").css("background-color", "#3bc264");
                        $(element).children("i").removeClass("fa-close");
                        $(element).children("i").addClass("fa-plus");
                    },
                    afterTagRemoved: function (event, ui) {
                        var data_id = $(ui.tag).attr("data-id");
                        $(".myTags").tagit("removeTag", $(".myTags li[data-id=" + data_id + "]"));
                    }
                });
                for (var i = 0; i < tags.length; i++) {
                    $(".myTags").tagit("createTag", decodeURI(tags[i]));
                    var e = $(".header_div_2 .keywords div p[value='" + decodeURI(tags[i]) + "']").parent();
                    $(".myTags li").eq(-2).attr("data-id", $(e).children("button").attr("data-id"));
                    $(e).children("button").css("background-color", "#ab2019");
                    $(e).children("button").attr("data-function", "remove");
                    $(e).children("button").children("i").removeClass("fa-plus");
                    $(e).children("button").children("i").addClass("fa-close");
                }
            }
            //END OF GETTING QUERYSTRING VALUES
        });


        var controller = window.location.href.slice(window.location.href.indexOf('?') + 1).split('/');
        controller = controller[3];
        if (controller == "Popular") {
            $("#popular").addClass("active");
            $("#home").removeClass("active");
            $("#leaderboard").removeClass("active");
            $("#popular-dup").addClass("active");
            $("#home-dup").removeClass("active");
            $("#leaderboard-dup").removeClass("active");
            // START OF GETTING FEATURED TAGS //
            $.ajax({
                async: false,
                type: "GET",
                url: "/Home/GetFeaturedTags",
                success: function (Tags) {
                    var availableTags;
                    for (var i = 0; i < Tags.length; i++) {
                        availableTags = Tags[i].TagName;
                    }
                    $(".myTags").tagit({ tagSource: availableTags });
                    for (var i = 0; i < Tags.length; i++) {
                        $(".myTags").tagit("createTag", Tags[i].TagName);
                        $(".myTags li").eq(-2).attr("data-id", Tags[i].TagID);
                    }
                }
            });
            // END OF GETTING FEATURED TAGS //
        } else if (controller == "Leaderboard") {
            $("#popular").removeClass("active");
            $("#leaderboard").addClass("active");
            $("#home").removeClass("active");
            $("#popular-dup").removeClass("active");
            $("#leaderboard-dup").addClass("active");
            $("#home-dup").removeClass("active");
        }
        else {
            $("#popular").removeClass("active");
            $("#leaderboard").removeClass("active");
            $("#home").addClass("active");
            $("#popular-dup").removeClass("active");
            $("#leaderboard-dup").removeClass("active");
            $("#home-dup").addClass("active");
        }
        $(document).ready(function () {
            if (controller == "Popular") {
                $(".header_div_2 .keywords div button").each(function () {
                    $(this).css("background-color", "#ab2019");
                    $(this).attr("data-function", "remove");
                    $(this).children("i").removeClass("fa-plus");
                    $(this).children("i").addClass("fa-close");
                });
            }

        });

        //START OF SEARCH CLICK FUNCTION
        $(".search").click(function () {
            var tags_qs = "";
            $('.content-wrapper.original .myTags').children('li').each(function () {
                var tagname = $(this).children('span').text();
                tags_qs = tags_qs + tagname + ",";
            });
            tags_qs = tags_qs.substring(0, tags_qs.length - 2);
            var posts_qs = "";
            $('.checkbox-wrapper.hidden-xs > div').children().each(function () {
                if ($(this).children('input').is(":checked")) {
                    posts_qs = posts_qs + $(this).children('input').attr("class") + ",";
                }
            });
            posts_qs = posts_qs.substring(0, posts_qs.length - 1);
            window.location = "/?posts=" + posts_qs + "&tags=" + tags_qs;
        });
        //END OF SEARCH CLICK FUNCTION 
    </script>
    @RenderSection("scripts", required: false)
</body>
</html>
