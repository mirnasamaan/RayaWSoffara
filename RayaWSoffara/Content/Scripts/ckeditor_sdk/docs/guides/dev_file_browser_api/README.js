Ext.data.JsonP.dev_file_browser_api({"guide":"<!--\nCopyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.\nFor licensing, see LICENSE.md.\n-->\n\n\n<h1 id='dev_file_browser_api-section-file-browser-api'>File Browser API</h1>\n<div class='toc'>\n<p><strong>Contents</strong></p>\n<ol>\n<li><a href='#!/guide/dev_file_browser_api-section-interaction-between-ckeditor-and-file-browser'>Interaction Between CKEditor and File Browser</a><ol>\n<li>\n<a href='#!/guide/dev_file_browser_api-section-example-1'>Example 1</a></li>\n</ol>\n<li>\n<a href='#!/guide/dev_file_browser_api-section-passing-the-url-of-the-selected-file'>Passing the URL of the Selected File</a><ol>\n<li>\n<a href='#!/guide/dev_file_browser_api-section-example-2'>Example 2</a></li>\n<li>\n<a href='#!/guide/dev_file_browser_api-section-example-3'>Example 3</a></li>\n<li>\n<a href='#!/guide/dev_file_browser_api-section-example-4'>Example 4</a></li></ol></ol>\n</div>\n\n<p>CKEditor can be easily integrated with your own file browser thanks to the <a href=\"http://ckeditor.com/addon/filebrowser\">File Browser</a> plugin which is included in every preset by default.</p>\n\n<p>To connect a file browser that is already compatible with CKEditor (like\n<a href=\"http://ckfinder.com\">CKFinder</a>), follow the <a href=\"#!/guide/dev_file_browse_upload\">File Browser (Uploader)</a>\ndocumentation.</p>\n\n<h2 id='dev_file_browser_api-section-interaction-between-ckeditor-and-file-browser'>Interaction Between CKEditor and File Browser</h2>\n\n<p>CKEditor automatically sends some additional arguments to the file\nbrowser:</p>\n\n<ul>\n<li><a href=\"#!/api/CKEDITOR.editor-property-name\" rel=\"CKEDITOR.editor-property-name\" class=\"docClass\">CKEditor</a> – name of the CKEditor instance,</li>\n<li><a href=\"#!/api/CKEDITOR.editor-property-langCode\" rel=\"CKEDITOR.editor-property-langCode\" class=\"docClass\">langCode</a> – CKEditor language (<code>en</code> for English),</li>\n<li><code>CKEditorFuncNum</code> – anonymous function reference number used to pass the URL of\na file to CKEditor (a random number).</li>\n</ul>\n\n\n<p>For example:</p>\n\n<pre><code>CKEditor=editor1&amp;CKEditorFuncNum=1&amp;langCode=en\n</code></pre>\n\n<h3 id='dev_file_browser_api-section-example-1'>Example 1</h3>\n\n<p>Suppose that CKEditor was created using the following JavaScript call:</p>\n\n<pre><code><a href=\"#!/api/CKEDITOR-method-replace\" rel=\"CKEDITOR-method-replace\" class=\"docClass\">CKEDITOR.replace</a>( 'editor2', {\n    filebrowserBrowseUrl: '/browser/browse.php?type=Images',\n    filebrowserUploadUrl: '/uploader/upload.php?type=Files'\n});\n</code></pre>\n\n<p>In order to browse files, CKEditor will call:</p>\n\n<pre><code>/browser/browse.php?type=Images&amp;CKEditor=editor2&amp;CKEditorFuncNum=2&amp;langCode=de\n</code></pre>\n\n<p>The call includes the following elements:</p>\n\n<ul>\n<li><code>/browser/browse.php?type=Images</code> – the value of the\n  <code>filebrowserBrowseUrl</code> parameter,</li>\n<li><code>&amp;CKEditor=editor2&amp;CKEditorFuncNum=2&amp;langCode=de</code> – the information\n  added by CKEditor:\n\n<ul>\n<li><code>CKEditor=editor2</code> – the name of a CKEditor instance\n  (<code>editor2</code>),</li>\n<li><code>CKEditorFuncNum=2</code> – the reference number of an anonymous\n  function that should be used in the\n  <a href=\"#!/api/CKEDITOR.tools-method-callFunction\" rel=\"CKEDITOR.tools-method-callFunction\" class=\"docClass\">callFunction</a>,</li>\n<li><code>langCode=de</code> – language code (in this case: German). This\n  parameter can be used to send localized error messages.</li>\n</ul>\n</li>\n</ul>\n\n\n<h2 id='dev_file_browser_api-section-passing-the-url-of-the-selected-file'>Passing the URL of the Selected File</h2>\n\n<p>To send back the file URL from an external file browser, call\n<a href=\"#!/api/CKEDITOR.tools-method-callFunction\" rel=\"CKEDITOR.tools-method-callFunction\" class=\"docClass\">CKEDITOR.tools.callFunction</a> and pass <code>CKEditorFuncNum</code> as the first\nargument:</p>\n\n<pre><code>window.opener.CKEDITOR.tools.callFunction( funcNum, fileUrl [, data] );\n</code></pre>\n\n<p>If <code>data</code> (the third argument) is a string, it will be displayed by\nCKEditor. This parameter is usually used to display an error message if\na problem occurs during the file upload.</p>\n\n<h3 id='dev_file_browser_api-section-example-2'>Example 2</h3>\n\n<p>The following example shows how to send the URL from a file browser\nusing JavaScript code:</p>\n\n<pre><code>// Helper function to get parameters from the query string.\nfunction getUrlParam( paramName ) {\n    var reParam = new RegExp( '(?:[\\?&amp;]|&amp;)' + paramName + '=([^&amp;]+)', 'i' ) ;\n    var match = window.location.search.match(reParam) ;\n\n    return ( match &amp;&amp; match.length &gt; 1 ) ? match[ 1 ] : null ;\n}\nvar funcNum = getUrlParam( 'CKEditorFuncNum' );\nvar fileUrl = '/path/to/file.txt';\nwindow.opener.CKEDITOR.tools.callFunction( funcNum, fileUrl );\n</code></pre>\n\n<h3 id='dev_file_browser_api-section-example-3'>Example 3</h3>\n\n<p>The following code shows how to send back the URL of an uploaded file\nfrom the PHP connector:</p>\n\n<pre><code>&lt;?php\n    // Required: anonymous function reference number as explained above.\n    $funcNum = $_GET['CKEditorFuncNum'] ;\n    // Optional: instance name (might be used to load a specific configuration file or anything else).\n    $CKEditor = $_GET['CKEditor'] ;\n    // Optional: might be used to provide localized messages.\n    $langCode = $_GET['langCode'] ;\n\n    // Check the $_FILES array and save the file. Assign the correct path to a variable ($url).\n    $url = '/path/to/uploaded/file.ext';\n    // Usually you will only assign something here if the file could not be uploaded.\n    $message = ;\n\n    echo \"&lt;script type='text/javascript'&gt;window.parent.CKEDITOR.tools.callFunction($funcNum, '$url', '$message');&lt;/script&gt;\";\n?&gt;\n</code></pre>\n\n<h3 id='dev_file_browser_api-section-example-4'>Example 4</h3>\n\n<p>If <code>data</code> is a function, it will be executed in the scope of the button\nthat called the file browser. It means that the server connector can\nhave direct access CKEditor and the dialog window to which the button\nbelongs.</p>\n\n<p>Suppose that apart from passing the <code>fileUrl</code> value that is assigned to\nan appropriate field automatically based on the dialog window definition\nyou also want to set the <code>alt</code> attribute, if the file browser was opened\nin the <strong>Image Properties</strong> dialog window. In order to do this, pass an\nanonymous function as a third argument:</p>\n\n<pre><code>window.opener.CKEDITOR.tools.callFunction( funcNum, fileUrl, function() {\n    // Get the reference to a dialog window.\n    var element,\n        dialog = this.getDialog();\n    // Check if this is the Image dialog window.\n    if ( dialog.getName() == 'image' ) {\n        // Get the reference to a text field that holds the \"alt\" attribute.\n        element = dialog.getContentElement( 'info', 'txtAlt' );\n        // Assign the new value.\n        if ( element )\n            element.setValue( 'alt text' );\n    }\n    ...\n    // Return false to stop further execution - in such case CKEditor will ignore the second argument (fileUrl)\n    // and the onSelect function assigned to a button that called the file browser (if defined).\n    [return false;]\n});\n</code></pre>\n","title":"File Browser API","meta_description":"How to use CKEditor File Browser API.","meta_keywords":"ckeditor, editor, integrate, integration, API, file, files, upload, uploader, manage, management, browse, browser, image, images"});